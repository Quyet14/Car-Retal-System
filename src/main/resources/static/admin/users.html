<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω ng∆∞·ªùi d√πng - Admin</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/admin.css">
</head>
<body>
    <nav class="admin-navbar">
        <div class="container">
            <div class="nav-brand">
                <h1>üöó Admin Panel</h1>
            </div>
            <div class="nav-menu">
                <a href="/admin/dashboard.html" class="nav-link">Dashboard</a>
                <a href="/admin/cars.html" class="nav-link">Qu·∫£n l√Ω xe</a>
                <a href="/admin/reservations.html" class="nav-link">ƒê∆°n thu√™ xe</a>
                <a href="/admin/users.html" class="nav-link active">Ng∆∞·ªùi d√πng</a>
            </div>
            <div class="nav-user">
                <span class="user-name" id="adminName">Admin</span>
                <button class="btn btn-outline" onclick="logout()">ƒêƒÉng xu·∫•t</button>
            </div>
        </div>
    </nav>

    <section class="admin-section">
        <div class="container">
            <h1>Qu·∫£n l√Ω ng∆∞·ªùi d√πng</h1>

            <!-- Filters -->
            <div class="admin-filters">
                <input type="text" id="searchUser" placeholder="T√¨m theo t√™n, email..." class="form-input">
                <select id="filterRole" class="form-input">
                    <option value="">T·∫•t c·∫£ vai tr√≤</option>
                    <option value="Admin">Admin</option>
                    <option value="Client">Client</option>
                </select>
            </div>

            <!-- Users Table -->
            <div class="admin-card">
                <div id="usersTable" class="table-container">
                    <div class="empty-state">
                        <div class="empty-state-icon">üë•</div>
                        <p>Ch·ª©c nƒÉng qu·∫£n l√Ω ng∆∞·ªùi d√πng ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn</p>
                        <p style="color: var(--text-secondary); margin-top: 1rem;">
                            Hi·ªán t·∫°i b·∫°n c√≥ th·ªÉ qu·∫£n l√Ω ng∆∞·ªùi d√πng tr·ª±c ti·∫øp trong database
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Check admin auth
        const user = localStorage.getItem('currentUser');
        if (!user) {
            alert('Vui l√≤ng ƒëƒÉng nh·∫≠p');
            window.location.href = '/auth/login.html';
        } else {
            const userData = JSON.parse(user);
            if (!userData.roles || !userData.roles.includes('Admin')) {
                alert('B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p');
                window.location.href = '/index.html';
            }
            document.getElementById('adminName').textContent = `${userData.firstName} ${userData.lastName}`;
        }

        function logout() {
            fetch('/api/auth/logout', { credentials: 'include' })
                .finally(() => {
                    localStorage.removeItem('currentUser');
                    window.location.href = '/index.html';
                });
        }
    </script>
</body>
</html>
